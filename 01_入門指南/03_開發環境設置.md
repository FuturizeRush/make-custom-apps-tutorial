# 開發環境設置

## 本章概要

本章將詳細介紹如何設置 Make Custom Apps 的開發環境，包括 Make UI 的使用方法和 VS Code 擴充套件的安裝配置，幫助您建立高效的開發工作流程。

## 學習目標

- 了解兩種開發環境的優缺點
- 設置 VS Code 開發環境
- 生成和管理 API 金鑰
- 配置多環境開發
- 掌握常用開發工具和快捷鍵

## 前置知識

- 基本的 VS Code 使用經驗（選用）
- Make 帳號
- 已完成「快速開始」章節

## 內容主體

### 開發環境選擇

Make 提供兩種開發環境供您選擇：

#### 1. Make UI（網頁介面）

**優點**：
- 無需安裝額外軟體
- 即時測試和驗證
- 內建程式碼提示和驗證
- 適合快速原型開發

**缺點**：
- 功能相對有限
- 無法進行版本控制
- 不支援本地開發

#### 2. VS Code 擴充套件

**優點**：
- 完整的 JSON 語法支援
- 自動驗證和型別檢查
- 支援 Git 版本控制
- 本地開發和協作功能
- 更強大的程式碼編輯功能

**缺點**：
- 需要安裝和設置
- 學習曲線較高

> 💡 **建議**：初學者可從 Make UI 開始，熟悉後轉向 VS Code 進行進階開發。

### VS Code 環境設置步驟

#### 步驟 1：生成 API 金鑰

1. **登入 Make 帳號**
   - 前往個人檔案設定
   - 點擊「API」標籤

2. **建立新的 API Token**
   - 點擊「Add token」按鈕
   - 設定 Token 名稱（如：VS Code Development）

3. **設定權限範圍**
   
   必要權限：
   ```
   ✓ sdk-apps:read    - 讀取應用程式
   ✓ sdk-apps:write   - 寫入應用程式
   ```
   
   選用權限（根據需求）：
   ```
   ○ connections:read  - 讀取連接資訊
   ○ scenarios:read    - 讀取場景
   ○ teams:read        - 讀取團隊資訊
   ```

4. **保存 API 金鑰**
   - 點擊「Save」確認權限
   - **立即複製並安全保存金鑰**（只會顯示一次！）

> ⚠️ **重要**：API 金鑰等同於您的帳號密碼，請妥善保管，不要分享或提交到版本控制系統。

#### 步驟 2：安裝 VS Code 擴充套件

1. **開啟 VS Code**
2. **安裝擴充套件**
   - 進入擴充套件市場（Ctrl/Cmd + Shift + X）
   - 搜尋「Make Apps Editor」
   - 點擊「Install」安裝

3. **驗證安裝**
   - 左側邊欄應出現 Make 圖示
   - 點擊圖示確認擴充套件已啟動

#### 步驟 3：配置開發環境

1. **啟動配置**
   - 點擊左側 Make 圖示
   - 系統提示未設置環境
   - 點擊「Add environment」

2. **設定 API URL**
   
   根據您的區域選擇對應的 API URL。例如：
   - US1 區域：`us1.make.com/api`
   - EU1 區域：`eu1.make.com/api`
   
   > 💡 **提示**：如果不確定您的區域，請查看您的 Make 帳號 URL。URL 中的區域代碼（如 us1、eu1）即為您的區域。
   
   > ⚠️ **注意**：如果您要存取的應用程式與您的帳號在不同區域，請輸入應用程式所在區域的 API URL。

3. **設定環境標籤**
   - 輸入易識別的名稱（如：Production、Development）
   - 按 Enter 確認

4. **輸入 API 金鑰**
   - 貼上之前保存的 API 金鑰
   - 按 Enter 確認

5. **完成設置**
   - 擴充套件重新載入
   - 顯示應用程式列表

### VS Code 進階設定

#### 推薦的編輯器設定

在 VS Code 設定中加入：

```json
{
    // 自動格式化
    "editor.formatOnSave": true,
    
    // 在字串中顯示程式碼提示
    "editor.quickSuggestions": {
        "strings": true
    },
    
    // 自動補全括號
    "editor.autoClosingBrackets": "always",
    
    // 顯示空白字元
    "editor.renderWhitespace": "boundary",
    
    // JSON 檔案關聯
    "files.associations": {
        "*.jsonc": "jsonc"
    }
}
```

#### 多環境管理

1. **新增環境**
   - 命令面板（F1）
   - 執行：`Make Apps: Add SDK Environment`
   - 重複設置步驟

2. **切換環境**
   - 點擊底部狀態列的環境指示器
   - 選擇目標環境

3. **環境使用建議**
   ```
   開發環境 → 日常開發和測試
   測試環境 → 整合測試
   生產環境 → 正式發布
   ```

### Make UI 快捷鍵參考

#### Windows 使用者

| 快捷鍵 | 功能 |
|--------|------|
| Ctrl + Shift + H | 顯示快捷鍵速查表 |
| Ctrl + S | 儲存所有變更 |
| Ctrl + F | 搜尋內容 |
| Ctrl + H | 搜尋和取代 |
| Ctrl + Space | 顯示程式碼建議 |
| Shift + Alt + F | 格式化程式碼 |
| Ctrl + / | 切換註解 |
| F1 | 顯示命令面板 |

#### macOS 使用者

| 快捷鍵 | 功能 |
|--------|------|
| Ctrl + Shift + H | 顯示快捷鍵速查表 |
| Cmd + S | 儲存所有變更 |
| Cmd + F | 搜尋內容 |
| Opt + Cmd + F | 搜尋和取代 |
| Ctrl + Space | 顯示程式碼建議 |
| Shift + Opt + F | 格式化程式碼 |
| Cmd + / | 切換註解 |
| F1 | 顯示命令面板 |

### 常見問題處理

#### 問題 1：無法連接到 Make API

**檢查項目**：
- API URL 是否正確（注意區域）
- API 金鑰是否有效
- 網路連線是否正常
- 防火牆是否阻擋連線

#### 問題 2：找不到應用程式

**可能原因**：
- 環境設定錯誤
- 權限不足
- 應用程式在不同區域

**解決方法**：
1. 確認環境 URL 與應用程式所在區域一致
2. 檢查 API 金鑰權限
3. 嘗試重新登入

#### 問題 3：無法儲存變更

**檢查清單**：
- [ ] API 金鑰有 `sdk-apps:write` 權限
- [ ] 網路連線穩定
- [ ] JSON 格式正確
- [ ] 沒有語法錯誤

### 開發工作流程建議

1. **初始開發**
   ```
   Make UI → 快速原型 → VS Code → 完整開發
   ```

2. **團隊協作**
   ```
   VS Code + Git → 版本控制 → Code Review → 部署
   ```

3. **測試流程**
   ```
   本地開發 → 測試環境 → 驗證 → 生產環境
   ```

## 實作練習

### 練習 1：環境切換
1. 設置兩個不同的環境（開發/生產）
2. 在不同環境間切換
3. 驗證應用程式列表的差異

### 練習 2：API 金鑰管理
1. 建立具有不同權限的 API 金鑰
2. 測試權限限制
3. 練習金鑰輪替流程

## 重點整理

- VS Code 提供更強大的開發功能，適合專業開發
- API 金鑰是連接 Make 的關鍵，需妥善保管
- 多環境設置有助於安全的開發和部署流程
- 熟悉快捷鍵能顯著提升開發效率
- 正確的環境設置是成功開發的基礎

## 延伸閱讀

- [VS Code 官方文檔](https://code.visualstudio.com/docs)
- [Make API 文檔](https://www.make.com/en/api-documentation)
- [Git 版本控制基礎](https://git-scm.com/book/zh-tw/v2)
- [下一章：應用程式架構](../02_核心概念/01_應用程式架構.md)

---

[← 上一章：快速開始](02_快速開始.md) | [返回目錄](../00_目錄索引.md) | [下一章：應用程式架構 →](../02_核心概念/01_應用程式架構.md)